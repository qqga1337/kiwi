Для обеспечения отказоустойчивости используем Docker Swarm

1) Для начала инициализируем лидера - C-INGRESS

docker swarm init

Он покажет тебе команду добавления worker'ов - если получится её скопировать и вставить в консоль, то можешь сделать так. 
Иначе

Можно docker swarm join-token worker - она покажет тоже команду, и например, перенаправить вывод в файл:
docker swarm join-token worker > init.sh

потом в  init.sh удаляешь лишние строки, даешь права на выполнение и дело сделано - можно смело выполнить файл и worker добавится в Swarm

Проверить, что все тачки в Swarm можно командой с leader
docker node ls  

2) Далее, перед запуском Docker Composer'а.
Проверь что примонтировался /mnt по glusterfs.
Создай там каталоги и проверь что они появились на всех хостах в Docker Swarm:
/mnt/nextcloud
/mnt/nextapps
/mnt/nextconfig
/mnt/nextdata
/mnt/db

Это и есть наши отказоустойчивые Volume на общем Gluster ресурсе

3) После этого все готово к тому, чтобы запустить все это через  оркестратор.
docker stack deploy --compose-file docker-compose.yml next

Как проверить -
docker stack ps next - покажет тебе на каких хостах запустились контейнеры.
Дальше можешь играться как хочешь, например, отключать контейнеры через docker kill и смотреть как они мигрируют
Или, например, откючать целые хосты (кроме Leader) чтобы проверить как все будет работать.





